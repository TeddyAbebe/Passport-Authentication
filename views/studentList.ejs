<div class="row mt-5">
  <div class="col-md-6" style="margin-left: 10%">
    <div class="card card-body text-center" style="width: 50rem">
      <h1 class="text-center mb-3 font-weight-bold">
        Hello, <strong class="text-muted"> <%= user.name %> </strong>
      </h1>

      <p class="lead mt-4">
        <a href="/User/dashboard" class="btn btn-primary btn-block mb-2"
          >Dashboard</a
        >
      </p>

      <h1>Student List</h1>

      <% if (messages && messages.length > 0) { %>
      <div
        class="alert alert-success alert-dismissible fade show"
        role="alert"
        style="color: black"
      >
        <% messages.forEach(message => { %>
        <strong><%= message.msg %></strong>
        <% }); %>

        <button
          type="button"
          class="close"
          data-dismiss="alert"
          aria-label="Close"
          style="color: red"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <% } %>

      <table class="table table-bordered">
        <thead style="border: 2px solid black">
          <tr style="border: 2px solid black">
            <th scope="col" style="border: 2px solid black">Name</th>
            <th scope="col" style="border: 2px solid black">Actions</th>
            <th scope="col" style="border: 2px solid black">Course</th>
          </tr>
        </thead>
        <tbody>
          <% students.forEach(student => { %>
          <tr>
            <td style="border: 2px solid black"><%= student.name %></td>
            <td style="border: 2px solid black">
              <form
                action="/admin/Course/enroll-student"
                method="post"
                style="display: inline"
              >
                <input
                  type="hidden"
                  name="studentId"
                  value="<%= student._id %>"
                />

                <select name="courseId" class="form-control">
                  <% courses.forEach(course => { %>
                  <option value="<%= course._id %>"><%= course.name %></option>
                  <% }); %>
                </select>

                <button
                  class="btn btn-warning btn-sm mt-1"
                  type="submit"
                  style="width: 7rem"
                >
                  Assign Course
                </button>
              </form>
            </td>

            <td style="flex-direction: column; border: 2px solid black">
              <% student.Courses.forEach(enrolledCourse => { %>
              <div>
                <div
                  style="
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    margin-bottom: 5px;
                    text-align: center;
                    border-bottom: 1px dotted black;
                  "
                >
                  <div>
                    * <%= enrolledCourse.courseName %> ( <%=
                    enrolledCourse.courseCode %> )
                  </div>
                  <form
                    action="/admin/Course/disEnroll-student?_method=DELETE"
                    method="post"
                    style="display: flex; margin-left: 5px"
                  >
                    <input
                      type="hidden"
                      name="studentId"
                      value="<%= student._id %>"
                    />
                    <input
                      type="hidden"
                      name="courseId"
                      value="<%= enrolledCourse.courseId %>"
                    />
                    <button class="btn btn-sm btn-danger" type="submit">
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                </div>
              </div>
              <% }); %>
            </td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</div>
